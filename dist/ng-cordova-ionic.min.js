"use strict";angular.module("ngCordovaIonic",["ngCordova"]),angular.module("ngCordovaIonic").factory("$cordovaReady",["$q","$ionicPlatform",function(o,n){return function(){var e=o.defer();return n.ready(function(){ionic.Platform.isWebView()?e.resolve("Cordova"):e.reject("Not cordova")}),e.promise}}]),angular.module("ngCordovaIonic").factory("fileSystemService",["$window","$q","$ionicPlatform","$cordovaReady","$log",function(o,n,e,r,t){function i(o,n){return o.root.toURL()+"/"+n}function u(){return r().then(function(){var e=n.defer();return o.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(o){t.debug("Filesystem",o),e.resolve(o)},function(o){t.error("Filesystem error",o),e.reject(o)}),e.promise})}function i(o){return u().then(function(n){return i(n,o)})}function a(o){return u().then(function(e){var r=n.defer();return e.root.getFile(i(e,o),{create:!1},function(o){t.debug("File exists",o),r.resolve(o)},function(){t.debug("File does not exists",e),r.resolve(e)}),r.promise})}function c(o,e){return u().then(function(r){var u=n.defer(),a=new FileTransfer;a.onprogress=function(o){o.lengthComputable?u.notify(Math.round(o.loaded/o.total*100)):u.notify(0)};try{a.download(encodeURI(o),i(r,e),function(o){t.debug("File downloaded",o),u.resolve(o)},function(o){t.error("File download error",o),u.reject(o)})}catch(c){t.error("File download error",c.message),u.reject(c)}finally{return u.promise}})}function l(){return u().then(function(o){function n(o){t.error("Remove error",o)}function e(o){t.debug("File removed",o)}var r=o.root.createReader();r.readEntries(function(o){_.forEach(o,function(o){o.isDirectory?o.removeRecursively(e,n):o.remove(e,n)})},n)})}return{getFilesystem:u,getFilePath:i,checkFile:a,downloadFile:c,emptyFileSystem:l}}]),angular.module("ngCordovaIonic").factory("localStorage",["$window",function(o){function n(n,e){o.localStorage[n]=e||""}function e(n,e){return o.localStorage[n]||e}function r(o,e){n(o,angular.toJson(e||[]))}function t(o,n){return angular.fromJson(e(o,n||"[]"))}return{set:n,get:e,setJson:r,getJson:t}}]),angular.module("ngCordovaIonic").factory("networkService",["$q","$log","$cordovaNetwork","$cordovaReady",function(o,n,e,r){return function(t){var i=o.defer();return r().then(function(){(t?e.getNetwork()===Connection[t]:e.isOnline())?(n.debug("Cordova Online"),i.resolve()):(n.debug("Cordova Offline"),i.reject())},function(){!navigator||navigator.onLine?(n.debug("Online"),i.resolve()):(n.debug("Offline"),i.reject())}),i.promise}}]),angular.module("ngCordovaIonic").factory("notifier",["$log","$cordovaToast","$cordovaReady",function(o,n,e){function r(r,t){var i=_(arguments).toArray().rest(2).join(" ");if(!_.contains(["short","long"],r)||!_.contains(["top","center","bottom"],t))throw Error("Not valid duration: "+r+" or position: "+t);return e().then(function(){return n.show(i,r,t).then(function(n){return o.debug(n),n},function(n){return o.error(n),n})},function(){return o.info(i),i})}return{toast:r,info:_.partial(r,"short","top")}}]),angular.module("ngCordovaIonic").factory("popup",["$log","$cordovaDialogs","$ionicPopup","$cordovaReady",function(o,n,e,r){function t(o,t,i){r().then(function(){n.confirm(t,function(o){var n=i[o-1];n&&n.onTap?n.onTap():angular.noop()},o,_.map(i,"text"))},function(){e.show({title:o,subTitle:t,buttons:i})})}return{show:t}}]);