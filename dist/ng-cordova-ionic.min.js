"use strict";angular.module("ngCordovaIonic",["ngCordova"]),angular.module("ngCordovaIonic").factory("$cordovaReady",["$q","$ionicPlatform",function(o,e){return function(){var n=o.defer();return e.ready(function(){ionic.Platform.isWebView()?n.resolve("Cordova"):n.reject("Not cordova")}),n.promise}}]),angular.module("ngCordovaIonic").factory("fileSystemService",["$window","$q","$ionicPlatform","$cordovaReady","$log",function(o,e,n,r,t){var i={},u=function(o,e){return o.root.toURL()+"/"+e};return i.getFilesystem=function(){return r().then(function(){var n=e.defer();return o.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(o){t.debug("Filesystem",o),n.resolve(o)},function(o){t.error("Filesystem error",o),n.reject(o)}),n.promise})},i.getFilePath=function(o){return i.getFilesystem().then(function(e){return u(e,o)})},i.checkFile=function(o){return i.getFilesystem().then(function(n){var r=e.defer();return n.root.getFile(u(n,o),{create:!1},function(o){t.debug("File exists",o),r.resolve(o)},function(){t.debug("File does not exists",n),r.resolve(n)}),r.promise})},i.downloadFile=function(o,n){return i.checkFile(n).then(function(o){var r,i=e.defer();return o.isFile?(r=o.toURL(),o.remove(function(o){t.debug("File removed",o),i.resolve(r)},function(o){t.error("File remove error",o),i.reject(o)})):(r=u(o,n),i.resolve(r)),i.promise}).then(function(n){var r=e.defer(),i=new FileTransfer;return i.onprogress=function(o){r.notify(o.lengthComputable?Math.round(o.loaded/o.total*100):"...")},i.download(encodeURI(o),n,function(o){t.debug("File downloaded",o),r.resolve(o)},function(o){t.error("File download error",o),r.reject(o)}),r.promise})},i}]),angular.module("ngCordovaIonic").factory("localStorage",["$window",function(o){var e={};return e.set=function(e,n){o.localStorage[e]=n||""},e.get=function(e,n){return o.localStorage[e]||n},e.setJson=function(o,n){e.set(o,angular.toJson(n||[]))},e.getJson=function(o,n){return angular.fromJson(e.get(o,n||"[]"))},e}]),angular.module("ngCordovaIonic").factory("networkService",["$q","$log","$cordovaNetwork","$cordovaReady",function(o,e,n,r){return function(t){var i=o.defer();return r().then(function(){(t?n.getNetwork()===t:n.isOnline())?(e.debug("Cordova Online"),i.resolve()):(e.debug("Cordova Offline"),i.reject())},function(){!navigator||navigator.onLine?(e.debug("Online"),i.resolve()):(e.debug("Offline"),i.reject())}),i.promise}}]),angular.module("ngCordovaIonic").factory("notifier",["$log","$cordovaToast","$cordovaReady",function(o,e,n){var r={};return r.toast=function(r,t){var i=_(arguments).toArray().rest(2).join(" ");if(!_.contains(["short","long"],r)||!_.contains(["top","center","bottom"],t))throw Error("Not valid duration: "+r+" or position: "+t);return n().then(function(){return e.show(i,r,t).then(function(e){return o.debug(e),e},function(e){return o.error(e),e})},function(){return o.info(i),i})},r.info=function(){return _.partial(r.toast,"short","top").apply(r,_.toArray(arguments))},r}]),angular.module("ngCordovaIonic").factory("popup",["$log","$cordovaDialogs","$ionicPopup","$cordovaReady",function(o,e,n,r){var t={};return t.show=function(o,t,i){r().then(function(){e.confirm(t,function(o){var e=i[o-1];e&&e.onTap?e.onTap():angular.noop()},o,_.map(i,"text"))},function(){n.show({title:o,subTitle:t,buttons:i})})},t}]);