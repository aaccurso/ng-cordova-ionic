"use strict";angular.module("ngCordovaIonic",["ngCordova"]),angular.module("ngCordovaIonic").factory("$cordovaReady",["$q","$ionicPlatform",function(o,e){return function(){var n=o.defer();return e.ready(function(){ionic.Platform.isWebView()?n.resolve("Cordova"):n.reject("Not cordova")}),n.promise}}]),angular.module("ngCordovaIonic").factory("fileSystemService",["$window","$q","$ionicPlatform","$cordovaReady","$log",function(o,e,n,r,t){function i(o,e,n){return _.compact([o.root.toURL(),n,e]).join("/")}function a(){return r().then(function(){var n=e.defer();return o.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(o){t.debug("Filesystem",o),n.resolve(o)},function(o){t.error("Filesystem error",o),n.reject(o)}),n.promise})}function u(o,e){return a().then(function(n){return i(n,o,e)})}function c(o,n){return a().then(function(r){var a=e.defer();return r.root.getFile(i(r,o,n),{create:!1},function(o){t.debug("File exists",o),a.resolve(o)},function(){t.debug("File does not exists",r),a.resolve(r)}),a.promise})}function l(o,n,r){return a().then(function(o){function n(e){e&&t.debug("Create Dir:",e),i.resolve(o)}var i=e.defer();return r||n(),o.root.getDirectory(r,{create:!0},n,n),i.promise}).then(function(a){var u=e.defer(),c=new FileTransfer;c.onprogress=function(o){o.lengthComputable?u.notify(Math.round(o.loaded/o.total*100)):u.notify(0)};try{c.download(encodeURI(o),i(a,n,r),function(o){t.debug("File downloaded",o),u.resolve(o)},function(o){t.error("File download error",o),u.reject(o)})}catch(l){t.error("File download error",l.message),u.reject(l)}finally{return u.promise}})}function f(o){return a().then(function(e){function n(o,e){t.error("Remove error",e.name,o)}function r(o,e){t.debug("File/Dir removed",e.name,o)}var i=e.root.createReader();i.readEntries(function(e){_.forEach(e,function(e){(!o||o(e))&&(e.isDirectory?e.removeRecursively(_.partialRight(r,e),_.partialRight(n,e)):e.remove(_.partialRight(r,e),_.partialRight(n,e)))})},n)})}return{getFilesystem:a,getFilePath:u,checkFile:c,downloadFile:l,emptyFilesystem:f}}]),angular.module("ngCordovaIonic").factory("localStorage",["$window",function(o){function e(e,n){o.localStorage[e]=n||""}function n(e,n){return o.localStorage[e]||n}function r(o,n){e(o,angular.toJson(n||[]))}function t(o,e){return angular.fromJson(n(o,e||"[]"))}return{set:e,get:n,setJson:r,getJson:t}}]),angular.module("ngCordovaIonic").factory("networkService",["$q","$log","$cordovaNetwork","$cordovaReady",function(o,e,n,r){return function(t){var i=o.defer();return r().then(function(){(t?n.getNetwork()===Connection[t]:n.isOnline())?(e.debug("Cordova Online"),i.resolve()):(e.debug("Cordova Offline"),i.reject())},function(){!navigator||navigator.onLine?(e.debug("Online"),i.resolve()):(e.debug("Offline"),i.reject())}),i.promise}}]),angular.module("ngCordovaIonic").factory("notifier",["$log","$cordovaToast","$cordovaReady",function(o,e,n){function r(r,t){var i=_(arguments).toArray().rest(2).join(" ");if(!_.contains(["short","long"],r)||!_.contains(["top","center","bottom"],t))throw Error("Not valid duration: "+r+" or position: "+t);return n().then(function(){return e.show(i,r,t).then(function(e){return o.debug(e),e},function(e){return o.error(e),e})},function(){return o.info(i),i})}return{toast:r,info:_.partial(r,"short","top")}}]),angular.module("ngCordovaIonic").factory("popup",["$log","$cordovaDialogs","$ionicPopup","$cordovaReady",function(o,e,n,r){function t(o,t,i){r().then(function(){e.confirm(t,function(o){var e=i[o-1];e&&e.onTap?e.onTap():angular.noop()},o,_.map(i,"text"))},function(){n.show({title:o,subTitle:t,buttons:i})})}return{show:t}}]);